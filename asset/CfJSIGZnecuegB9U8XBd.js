import{u as d}from"./DMCex30FeWvvThtDj-pY.js";import{G as l}from"./aw3wHiZxDYoFCCMsbTym.js";import{R as r,f as R}from"./DeTGZYeDNQQzD2Hg2g8t.js";import"./D95vS4HXwexk6O9L7iKW.js";import{R as h}from"./CBz6XaW8XVsUxq4xS6m1.js";import"./b9QDabEUvKe6AI27JKho.js";const I=t=>{try{return new URL(t)}catch{return}};function E(t,n,a="instance"){const u=d("InstanceValidation"),[e,m]=r.useState(null),[f,s]=r.useState(!1),g=r.useCallback(p=>{n(a),s(!1),e&&clearTimeout(e),m(setTimeout(async()=>{const c=I(p.target.value);if(!c)return;s(!0);let o;try{o=await h.getEndpointsFromDomain(c)}catch(i){return s(!1),t(a,{type:"manual",message:i instanceof Error&&i.message||"Instance could not be resolved"})}u.debug("Instance lookup has set routes to",o),l.routeSettings=o,l.save(),s(!1)},500))},[e,t,n,a,u]);return R.useEffect(()=>()=>{e&&clearTimeout(e)},[e]),{handleInstanceChange:g,isCheckingInstance:f}}export{E as u};
