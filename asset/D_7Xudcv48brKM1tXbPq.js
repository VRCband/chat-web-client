import{u as f,ad as h,w as j,j as e,q as v}from"./DeTGZYeDNQQzD2Hg2g8t.js";import{m as a}from"./CuA_0ud078oJ-lK1_bt7.js";import"./Bb1ggiTpiYWP0Snah0HS.js";import{L as b,b as y,a as L,I as k}from"./CmpVyqjHNaBPznX_UEM_.js";import{T as E}from"./CrtDogWriDzdj-4L2_mn.js";import{u as I}from"./RfSsDsLnzSmF70stwuXp.js";import{u as w}from"./DMCex30FeWvvThtDj-pY.js";import"./D95vS4HXwexk6O9L7iKW.js";import"./b9QDabEUvKe6AI27JKho.js";import{m as S}from"./BvFgMfzu9O3nUQg8aBdA.js";import{M as C}from"./BeHhE5cu_Zs49LScyuSd.js";const F=v.div`
	display: flex;
	flex-direction: column;
`;function N({...d}){const c=w("JoinServerModal"),m=I(),p=f(),{register:u,handleSubmit:g,formState:{errors:o,isLoading:n},setError:s,setValue:J}=h(),l=g(i=>{const x=i.code.split("/").reverse()[0];m.rest.post(j.invite(x)).then(r=>{p(`/channels/${r.guild_id}/${r.channel_id}`),a.closeAll()}).catch(r=>{if("message"in r)if(r.errors){const t=S(r.errors);t?s(t.field,{type:"manual",message:t.error}):s("code",{type:"manual",message:r.message})}else s("code",{type:"manual",message:r.message});else c.error(r),s("code",{type:"manual",message:"Unknown Error"})})});return e.jsx(C,{...d,onClose:()=>a.closeAll(),title:"Join a Guild",description:"Enter an invite below to join an existing guild.",actions:[{onClick:l,children:e.jsx("span",{children:"Join"}),palette:"primary",confirmation:!0,disabled:n},{onClick:()=>a.pop("close"),children:e.jsx("span",{children:"Back"}),palette:"link",disabled:n}],children:e.jsx("form",{onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),l())},children:e.jsxs(F,{children:[e.jsxs(b,{error:!!o.code,children:[e.jsx(y,{children:"Invite Link"}),o.code&&e.jsx(L,{children:e.jsxs(e.Fragment,{children:[e.jsx(E,{children:"-"}),o.code.message]})})]}),e.jsx(k,{...u("code",{required:!0}),placeholder:`${window.location.origin}/invite/`,type:"text",maxLength:9999,required:!0,error:!!o.code,disabled:n,autoFocus:!0,minLength:6})]})})})}export{N as J};
